<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>Hayden Library Geospatial Hub 3D Model</title>

    <link rel="stylesheet" href="https://js.arcgis.com/4.18/esri/themes/light/main.css" />
    <link href="https://unpkg.com/tabulator-tables@4.9.3/dist/css/tabulator.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <!-- Load icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.9.3/dist/js/tabulator.min.js"></script>
    <script src="https://js.arcgis.com/4.18/"></script>
    


    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }

      * {
  box-sizing: border-box;
}

/* Style the search field */
form.example input[type=text] {
  padding: 10px;
  font-size: 17px;
  border: 1px solid grey;
  float: left;
  width: 40%;
  background: #f1f1f1;
  z-index: 999999;
  position: absolute;
  left: 70px;
  top: 20px;
}

/* Style the submit button */
form.example button {
  position: absolute;
  z-index: 999999;
  top: 20px;
  left: 620px;
  float: left;
  width: 5%;
  padding: 14px;
  background: #2196F3;
  color: white;
  font-size: 17px;
  border: 1px solid grey;
  border-left: none; /* Prevent double borders */
  cursor: pointer;
}

form.example button:hover {
  background: #0b7dda;
}

/* Clear floats */
form.example::after {
  content: "";
  clear: both;
  display: table;
}
    </style>

    <script>
      require(["esri/Map", "esri/views/SceneView", "esri/layers/FeatureLayer", "esri/layers/SceneLayer", "esri/widgets/Legend"], function(
        Map,
        SceneView,
        FeatureLayer,
        SceneLayer,
        Legend
      ) {        
        // style for the Cabinets layer
        var cabRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d",  // autocasts as new PolygonSymbol3D()
            symbolLayers: [{
              type: "extrude",   // autocasts as new ExtrudeSymbol3DLayer()
              size: 0.0762,        // Height of the extrusion in meters              
              material: { 
                color: "black" 
              },
              edges: {
                  type: "solid",
                  color: "#999",
                  size: 0.7
                },
            }]
          }
        }
        // style for the cabinets base layer  
         var cabBaseRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d",  // autocasts as new PolygonSymbol3D()
            symbolLayers: [{
              type: "extrude",   // autocasts as new ExtrudeSymbol3DLayer()
              size: 0.12192,        // Height of the extrusion in meters              
              material: { 
                color: "black" 
              },
              edges: {
                  type: "solid",
                  color: "#999",
                  size: 0
                },
            }]
          }
        }

        // style for the front desk layer  
         var frontDeskRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d",  // autocasts as new PolygonSymbol3D()
            symbolLayers: [{
              type: "extrude",   // autocasts as new ExtrudeSymbol3DLayer()
              size: 0.9144,        // Height of the extrusion in meters              
              material: { 
                color: "#F2DD9D" 
              },
              edges: {
                  type: "solid",
                  color: "#999",
                  size: 0
                },
            }]
          }
        }

        
        // style for the work station table  
        var workTableRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the work station",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.23, // features meeting this value from height field
                  size: 0.067056 // will be extruded by this height in meters
                },
                {
                  value: 2.9, // features meeting this value from height field
                  size: 0.9144 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0.22,
                  color: "white"
                },
                {
                  value: 3.0,
                  color: "#666666"
                }
              ]
            }
          ]
        };

        // style for the grey table  
        var greyTableRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the grey table",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.22, // features meeting this value from height field
                  size: 0.067056 // will be extruded by this height in meters
                },
                {
                  value: 3, // features meeting this value from height field
                  size: 0.9144 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0.22,
                  color: "#686868"
                },
                {
                  value: 3.0,
                  color: "#686868"
                }
              ]
            }
          ]
        };

        // style for the printer table  
        var printTableRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the printer table",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.22, // features meeting this value from height field
                  size: 0.067056 // will be extruded by this height in meters
                },
                {
                  value: 3, // features meeting this value from height field
                  size: 0.9144 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0.22,
                  color: "#686868"
                },
                {
                  value: 3.0,
                  color: "#686868"
                }
              ]
            }
          ]
        };

        

         // style for the square wooden table  
        var woodTableRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the square wooden table",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.15, // features meeting this value from height field
                  size: 0.04572 // will be extruded by this height in meters
                },
                {
                  value: 0.20, // features meeting this value from height field
                  size: 0.06096 // will be extruded by this height in meters
                },
                {
                  value: 3.0, // features meeting this value from height field
                  size: 0.9144 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0.15,
                  color: "black"
                },
                {
                  value: 0.20,
                  color: "#F9E8BA"
                },
                {
                  value: 3.0,
                  color: "black"
                }
              ]
            }
          ]
        };

        // style for the large scanner  
        var scannerRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the large scanner",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.394397, // features meeting this value from height field
                  size: 0.1202122056 // will be extruded by this height in meters
                },
                {
                  value: 0.565427, // features meeting this value from height field
                  size: 0.1723421496 // will be extruded by this height in meters
                },
                {
                  value: 3.199538, // features meeting this value from height field
                  size: 0.9752191824 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0,
                  color: "white"
                },
                {
                  value: 0.0,
                  color: "white"
                },
                {
                  value: 3.0,
                  color: "white"
                }
              ]
            }
          ]
        };

        // style for the tall cabinet layer  
         var tallCabRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{
              type: "extrude", // autocasts as new ExtrudeSymbol3DLayer()
              size: 1.32247123861173521, // Height of the extrusion in meters              
              material: { 
                color: "#E4DFD9" 
              },
              edges: {
                  type: "solid",
                  color: "#999",
                  size: 0
                },
            }]
          }
        }

        // style for the office walls layer  
         var wallsRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{
              type: "extrude", // autocasts as new ExtrudeSymbol3DLayer()
              size: 3.048, // Height of the extrusion in meters              
              material: { 
                color: [153, 83, 41, 0] 
              },
              edges: {
                  type: "solid",
                  color: "black",
                  size: .3048
                },
            }]
          }
        }

        // style for the Large table 3 
        var table3Renderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the large table 3",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.23, // features meeting this value from height field
                  size: 0.13001816142807595678 // will be extruded by this height in meters
                },
                {
                  value: 2.9, // features meeting this value from height field
                  size: 0.9773621614280765257 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0.22,
                  color: "#686868"
                },
                {
                  value: 3.0,
                  color: "#686868"
                }
              ]
            }
          ]
        };

        // style for the GeoSandBox  
        var boxRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the geosandbox",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 4, // features meeting this value from height field
                  size: 1.2192 // will be extruded by this height in meters
                },
                {
                  value: 9, // features meeting this value from height field
                  size: 2.7432 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 4,
                  color: "#A80000"
                },
                {
                  value: 4,
                  color: "#A80000"
                }
              ]
            }
          ]
        };

         // style for the Bookcases  
        var bookRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [
              { 
                type: "extrude", 
                edges: {
                        type: "solid", // autocasts as new SolidEdges3D()
                        color: [0, 0, 0, 0.5]
                },
              }
            ] // autocasts as new ExtrudeSymbol3DLayer()
          },           
          label: "Style for the geosandbox",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 3.88923, // features meeting this value from height field
                  size: 1.185437304 // will be extruded by this height in meters
                },
                {
                  value: 6.80037, // features meeting this value from height field
                  size: 2.072752776 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 3.88923,
                  color: "#E60000"
                },
                {
                  value: 6.80037,
                  color: "#E60000"
                }
              ]
            }
          ]
        };

        // style for the tall cabinet layer  
        var screensRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "mesh-3d", // autocasts as new MeshSymbol3D()
            symbolLayers: [{
              type: "fill", // autocasts as new FillSymbol3DLayer()
              material: {
                color: "#376CBD"
              },
              edges: {
                type: "solid", // autocasts as new SolidEdges3D()
                color: [0, 0, 0, 0.5]
              }
            }]
          }
        }; 

        // style for the grey tables  
        var greyRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "mesh-3d", // autocasts as new MeshSymbol3D()
            symbolLayers: [{
              type: "fill", // autocasts as new FillSymbol3DLayer()
              material: {
                color: "#376CBD"
              },
              edges: {
                type: "solid", // autocasts as new SolidEdges3D()
                color: [0, 0, 0, 0.5]
              }
            }]
          }
        }; 

        // style for the globe base 
        var globeBaseRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the printer table",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.3, // features meeting this value from height field
                  size: 0.09144 // will be extruded by this height in meters
                },
                {
                  value: 3.39, // features meeting this value from height field
                  size: 1.033272 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0.3,
                  color: "#8B6B59"
                },
                {
                  value: 3.39,
                  color: "#8B6B59"
                }
              ]
            }
          ]
        };   

        // style for the globe layer  
        var globeRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()          
          symbol: {
            type: "mesh-3d", // autocasts as new MeshSymbol3D()
            symbolLayers: [{
              type: "fill", // autocasts as new FillSymbol3DLayer()
              material: {
                color: "#54FB00"
              },                         
            }]
          }
        }; 

        // style for the grey table  
        var smallWoodTableRenderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: {
            type: "polygon-3d", // autocasts as new PolygonSymbol3D()
            symbolLayers: [{ type: "extrude" }] // autocasts as new ExtrudeSymbol3DLayer()
          },
          label: "Style for the small wooden table",
          visualVariables: [
            {
              type: "size", // indicates this is a size visual variable
              field: "Height", // height of the feature      
              stops: [
                {
                  value: 0.426568771089488, // features meeting this value from height field
                  size: 0.13001816142807595678 // will be extruded by this height in meters
                },
                {
                  value: 3.20656877108949, // features meeting this value from height field
                  size: 0.9773621614280765257 // will be extruded by this height in meters
                }
              ]
            },
            {
              type: "color",
              field: "Height",      
              stops: [
                {
                  value: 0.426568771089488,
                  color: "#F9E8BA"
                },
                {
                  value: 3.20656877108949,
                  color: "#828282"
                }
              ]
            }
          ]
        };

        


      // Creates a  new table to hold our map attributes  
      var table = new Tabulator("#example-table", {          
          pagination: "local",
          paginationSize: 10,
          columns:[
              {title:"Title", field:"attributes.Title"},
              {title:"Author", field:"attributes.Author"},
              {title:"Publisher", field:"attributes.Publisher"},
              {title:"Publication Date", field:"attributes.Publication_Date"},
              {title:"Scale", field:"attributes.Scale"},
              {title:"Catalog Item", field:"attributes.Catalog_Link", formatter:"link"},
              {title:"Call Number", field:"attributes.Call_Number"},
              {title:"MMS", field:"attributes.MMS"},
              {title:"Barcode", field:"attributes.Barcode"},
              {title:"OCoLC", field:"attributes.OCoLC"},
              {title:"GovDoc", field:"attributes.GovDoc"},
              {title:"SuDoc", field:"attributes.SuDoc"},
              {title:"Item Number", field:"attributes.Item_Number"},
              {title:"Language", field:"attributes.Language"},
              {title:"Theme", field:"attributes.Theme"},
              {title:"Location", field:"attributes.Geo"},
              {title:"Condition", field:"attributes.Condition"},
              {title:"Size (cm)", field:"attributes.Size__cm_"},
              {title:"Inventory Date", field:"attributes.Inventory_Date"},
              {title:"File Name", field:"attributes.File_Name"},
              {title:"Drawer ID", field:"attributes.Drawer_ID"},
              {title:"Drawer Description", field:"attributes.Drawer_Description"},
              {title:"Notes", field:"attributes.Notes"}
          ],     
      });

        var cabLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Cabinets_join/FeatureServer/0",
          renderer: cabRenderer,
          title: "Population living in poverty by county",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "{Sheet1__DRAWER_ID}, {Sheet1__STACK_ID}",
            content: "This is drawer {Sheet1__DRAWER_ID} in Cabinet {Sheet1__CAB_ID} in Stack {Sheet1__STACK_ID}",
          }    
        });
        // Cabinets base layer
        var baseLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Cabinets_Base/FeatureServer/0",
          renderer: cabBaseRenderer,
          title: "Population living in poverty by county",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "{Sheet1__DRAWER_ID}, {Sheet1__STACK_ID}",
            content: "This is drawer {Sheet1__DRAWER_ID} in Cabinet {Sheet1__CAB_ID} in Stack {Sheet1__STACK_ID}",
          }    
        });
        // Work Table Layer
        var workTableLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/work_station_table/FeatureServer/0",
          renderer: workTableRenderer,
          title: "Work Table",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Work Table",
            content: "Work Table",
          }    
        });

        // Tall Cabinet Layer
        var tallCabLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Tall_Microfiche_Cabinet/FeatureServer/0",
          renderer: workTableRenderer,
          title: "Population living in poverty by county",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "{Sheet1__DRAWER_ID}, {Sheet1__STACK_ID}",
            content: "This is drawer {Sheet1__DRAWER_ID} in Cabinet {Sheet1__CAB_ID} in Stack {Sheet1__STACK_ID}",
          }    
        });

        // Square Wooden Table Layer
        var woodTableLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Square_Wooden_Table/FeatureServer/0",
          renderer: woodTableRenderer,
          title: "Square Wooden Table",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Square Wooden Table",
            content: "This is drawer {Sheet1__DRAWER_ID} in Cabinet {Sheet1__CAB_ID} in Stack {Sheet1__STACK_ID}",
          }    
        });

        // Small Grey Table Layer
        var greyTableLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Small_Gray_Table/FeatureServer/0",
          renderer: greyTableRenderer,
          title: "Small Grey Table",
          outFields: ["*"], 
          maxScale: 0,
          minScale: 0,     
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Small Grey Table",
            content: "This is drawer {Sheet1__DRAWER_ID} in Cabinet {Sheet1__CAB_ID} in Stack {Sheet1__STACK_ID}",
          }    
        });

        // PrinterTable Layer
        var printTableLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/print_table/FeatureServer/0",
          renderer: printTableRenderer,
          title: "Printer Table",
          outFields: ["*"],    
          maxScale: 0,
          minScale: 0,  
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Print Table",
            content: "This is drawer {Sheet1__DRAWER_ID} in Cabinet {Sheet1__CAB_ID} in Stack {Sheet1__STACK_ID}",
          }    
        });

        // Scanner Layer
        var scannerLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Large_Scanner/FeatureServer/0",
          renderer: scannerRenderer,
          title: "Large Scanner",
          outFields: ["*"],   
          maxScale: 0,
          minScale: 0,   
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Large Scanner",
            content: "Large Scanner",
          }    
        });

        // Office Walls Layer
        var wallsLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Office_Walls/FeatureServer/0",
          renderer: wallsRenderer,
          title: "Office Walls",
          outFields: ["*"],  
          maxScale: 0,
          minScale: 0,    
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Office Walls",
            content: "Office Walls",
          }    
        });

        // Large Table 4 Layer
        var table4Layer = new SceneLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/table43d/SceneServer/layers/0",
          renderer: greyRenderer,
          title: "Large Table 4",
          outFields: ["*"],            
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Large Table 4",
            content: "Large Table 4",
          }    
        });

        // Large Table 3 Layer
        var table3Layer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Large_Grey_Table_3/FeatureServer/0",
          renderer: table3Renderer,
          title: "Large Table 3",
          outFields: ["*"],     
          maxScale: 0,
          minScale: 0, 
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Large Table 3",
            content: "Large Table 3",
          }    
        });

        // Large Table 2 Layer
        var table2Layer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Large_Grey_Table_2_shp/FeatureServer/0",
          renderer: table3Renderer,
          title: "Large Table 2",
          outFields: ["*"], 
          maxScale: 0,
          minScale: 0,     
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Large Table 2",
            content: "Large Table 2",
          }    
        });

        // Large Table 1 Layer
        var table1Layer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Large_Grey_Table_1/FeatureServer/0",
          renderer: table3Renderer,
          title: "Large Table 1",
          outFields: ["*"], 
          maxScale: 0,
          minScale: 0,     
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Large Table 1",
            content: "Large Table 1",
          }    
        });

        // geosandbox Layer
        var boxLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/geosandbox/FeatureServer/0",
          renderer: boxRenderer,
          title: "Geosandbox",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Large Table 2",
            content: "Large Table 2",
          }    
        });

        // Front Desk Layer
        var frontDeskLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Front_desk_test/FeatureServer/0",
          renderer: frontDeskRenderer,
          title: "Front Desk",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Front Desk",
            content: "Front Desk",
          }    
        });

        // Flatscreens Layer
        var screensLayer = new SceneLayer({
          url: "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Flatscreens/SceneServer/layers/0",    
          renderer: screensRenderer,
          title: "Flatscreens",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Flatscreens",
            content: "Flatscreens",
          }          
        });

        // Globe Base Layer
        var globeBaseLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/globe_base/FeatureServer/0",
          renderer: globeBaseRenderer,
          title: "Globe",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Globe",
            content: "Globe",
          }    
        });
        
        // Flatscreens Layer
        var globeLayer = new SceneLayer({
          url: "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/globe/SceneServer/layers/0",    
          renderer: globeRenderer,
          title: "Globe",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Globe",
            content: "Globe",
          }          
        });

        // Conference Table Layer
        var confTableLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/conference_table/FeatureServer/0",
          renderer: workTableRenderer,
          title: "Conference Table",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Conference Table",
            content: "Conference Table",
          }    
        }); 

        // Bookcases Layer
        var bookLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Bookcases/FeatureServer/0",
          renderer: bookRenderer,
          title: "Bookcases",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Bookcases",
            content: "Bookcases",
          }    
        }); 

        // Small wooden table Layer
        var smallWoodTableLayer = new FeatureLayer({
          url:
            "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Small_Wooden_Table/FeatureServer/0",
          renderer: smallWoodTableRenderer,
          title: "Small Wooden Table",
          outFields: ["*"],      
          popupTemplate: {
            // autocasts as new PopupTemplate()
            title: "Small Wooden Table",
            content: "Small Wooden Table",
          }    
        });                 

        var map = new Map({
          basemap: "dark-gray-vector",
          layers: [cabLayer, baseLayer, workTableLayer, tallCabLayer, woodTableLayer, greyTableLayer, printTableLayer,
          scannerLayer, wallsLayer, table4Layer, table3Layer, table2Layer, table1Layer, boxLayer, frontDeskLayer, screensLayer,
          globeBaseLayer, globeLayer, confTableLayer, bookLayer, smallWoodTableLayer]
        });

        var view = new SceneView({
          container: "viewDiv",
          /*highlightOptions: {
            color: [255,0,0]
          },*/ 
          map: map,
          center: [-111.9343325, 33.4193831],
          zoom: 20,
          /*camera: {
            position: {
              latitude: 33.4193831,
              longitude: -111.9343325,
              z: 100
            },*/
            tilt: 45,
            heading: 10
          //}
        });
        view.on("click", function(event) {
          // only include graphics from hurricanesLayer in the hitTest
          const opts = {
            include: cabLayer
          }
          view.hitTest(event, opts).then(function(response) {
            // check if a feature is returned from the cabLayer
            if (response.results.length) {
              const graphic = response.results[0].graphic;
              // Get the Drawer_ID of the clicked drawer
              var drawerId = graphic.attributes.Sheet1__DRAWER_ID;
              console.log(drawerId);
              // Call to the ArcGIS REST API to retreive the maps in each drawer
              $.ajax({
                      dataType: 'json',
                      url: 'https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/maps129/FeatureServer/0/query?where=Drawer_ID+%3D+' + drawerId + '&objectIds=&time=&resultType=none&outFields=*&returnHiddenFields=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&sqlFormat=none&f=pjson',
                      type: "GET",    
                      success: function(data) {
                       console.log(data.features);
                       // Get the features from the REST API 
                       var features = data.features;  
                       $('#drawerModal').modal('show');  
                       // Create a new table with the array of features 
                       table.setData(features);
                      }
              });   
            }
          });
        });
        // Code for the search bar functions
        $( "#submit" ).click(function() {
          // get the value of the search box
          var searchVal = $( "#search" ).val();
          // call to query the REST API using the value of the search
          $.ajax({
                  dataType: 'json',
                  url: 'https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/maps129/FeatureServer/0/query?where=Title+LIKE+%27%25' + searchVal + '%25%27&objectIds=&time=&resultType=none&outFields=*&returnHiddenFields=false&returnIdsOnly=false&returnUniqueIdsOnly=false&returnCountOnly=false&returnDistinctValues=false&cacheHint=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&having=&resultOffset=&resultRecordCount=&sqlFormat=none&f=pjson',
                  type: "GET",    
                  success: function(data) {
                   console.log(data.features);
                   // Get the features from the REST API 
                   var searchRes = data.features;  
                   $('#drawerModal').modal('show');  
                   // Create a new table with the array of features 
                   table.setData(searchRes);
                  }
              });   
        });
          
        
      }); // end of map JS
    </script>
  </head>

  <body>
    <div id="viewDiv"></div>
    <div class="modal" id="drawerModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Modal title</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div id="example-table"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary">Save changes</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
</div>

<form class="example">
  <input type="text" placeholder="Search.." name="search" id="search">
  <button type="button" id="submit"><i class="fa fa-search"></i></button>
</form>
  </body>
</html>